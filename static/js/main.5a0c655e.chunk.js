(this["webpackJsonpchristmas-delivery"]=this["webpackJsonpchristmas-delivery"]||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"a":"Enter your code here","b":"Run code","c":"You have won!"}')},24:function(e,t,i){},33:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i(0),o=i.n(s),r=i(9),a=i.n(r),c=(i(24),i(17)),u=i(4);function h(e){var t=e.position,i=t.x,s=t.y,o=e.state,r=e.spriteSheet,a=r.size,c=a.width,u=a.height,h=-0*c,d=-1*r.states.findIndex((function(e){return e===o}))*u;return Object(n.jsx)("div",{style:{position:"absolute",width:c,height:u,left:i-c/2,top:s-u/2,backgroundImage:"url(".concat(r.source,")"),backgroundPositionX:h,backgroundPositionY:d}})}var d={source:i.p+"static/media/sleigh.5439a825.png",size:{width:250,height:125},frames:6,states:["idle","moving","crashing","burning"]};function l(e){var t=e.sleigh.position,i=e.state;return Object(n.jsx)(h,{position:t,spriteSheet:d,state:i})}var b={source:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAP6SURBVHhe7ZLbdsUgCET7/z/dohBrEi+ogJpkP5wqEmaY1Z/fSfykoLcbhSdLZoZFJx4r5DXHQcfmbwwLdu5ee3pepvKD235hNfCWsGDP8VVFhoygri2+ofhAPhZh0UmUKZHp6mnvYxyZopLZJmZ5qciYxYRsHxadrLBRfEhYgIHoF1YDX1gNyAtMSQrYKSzwGqCSLQa6AgITA7qg7WRotLa5PvQs9c9dMKaAkrdnhgVo2OucuHhSCJiU9dk8S9yBNoJu2zbfK6aAlG03xQXGGyelaoyU7f+Y3MmD1zuFp/URMZ9Ix5VSRTrtiYh/N6Iaze5JIbDF4CLpsIBQHBRYDRfYeaN7JYdryrXyp2wHrobEFTzneGlYOcorZ8MKxcLHz8NFdUCliEQi99bL9WHgvki44tOFU0bh906uvjUulWivcMUDgk/I+XJ7jik8iYDqAN0PqOqhUgrqiHro7qHSQa5Ip4i4E89EKOHhTuGpjB9fgVpvzVT1UCkFdUQ9dPdQ6YCqB8liDDakO3J1oPAVgK936HlJ+Paaw0KSDYuHkqMhrBiqnauXKxKKvv103osm26dW3BmhUmYc9gSouiFN5tNB0InNpnm12n5pWGC4Z036G9G3ed9X9viUOq2+K6xBk2JhASvnBd7G7UmGBaCnAFVnI+IkvY/gkk7AQ/dJjBvACekp4utNzEtE+vlhgaiIbhhiFBbgnRtFJqgVz7ELC9GbjLiQRCXiadZhAXrDNSZPDgvQ3kqQ+WEBshIGSQEJDYOkEEEhDc/3mTPDAqS0xD0nB04OCxiXs0kKmB8WMKj4rrAAEG3VxU8AuouSHLtKWAhT2iWkbDI5f62wgLK6C0nfXk4iU10vLxeSlauc0IphAT6ZE/SgT0Fr3bDCrzE7hQXSsbq9k4LiWmEldY3NbBAWKOZEjc0U5LL+LC1WtdAPQHdNCioleQNzPoEGFexHqCRNYfK0sPy+Q/OV7BXG5h/UknIhCQ3XMFmYaRqWC0l6LM4E6D5GeY5dWOIDL4zPr04oPQuup50UAioBKrVQ/coiLKk5fDoUOZ9UOsb3tE8KAd0maU4zo6NxW2/SfRIOE+EY4PtkzaITg9Dc9JUqVSd8q6y+hnHLZBTgWGLalgxrwaQQMFb2xnTenILXPRGK2LAsF5O5cwFe0zErOZSptAjgNhBf8bUMd08cxxy6Mj6Zf6jKg5foAd23JV6hYx3uBw9LCvjCKvGFxeXuXzEsYOu8vrC4iCQFvDSsPr6wGnhFWICI+VeENeE/C1gwL7BUhVqHUQ+rYBefAlQ9oGoN6jahZ3k61YiXwfMFfApQ9YCqK9HjqbpMtWFT+lfCRJJQx+N47GLy/P7+AQEnBQawPmZzAAAAAElFTkSuQmCC",size:{width:100,height:100},frames:1,states:["idle"]};function g(e){var t=e.position,i=e.state;return Object(n.jsx)(h,{position:t,spriteSheet:b,state:i})}function f(e){var t=e.state;return Object(n.jsxs)("div",{style:{position:"relative",border:"solid 1px black",margin:"1rem",width:t.world.size.width,height:t.world.size.height},children:[t.houses.map((function(e){return Object(n.jsx)(g,{position:e.position,state:"idle"},e.id)})),t.sleighs.map((function(e){return Object(n.jsx)(l,{sleigh:e,state:"idle"},e.id)}))]})}var m=i(2),p=i(5),j=Object(p.b)({name:"world",initialState:{fps:50,size:{width:800,height:600},ticks:0,ticksPerFrame:1},reducers:{updateWorldState:function(e,t){return Object(m.a)(Object(m.a)({},e),t.payload)},waitTicks:function(e,t){return Object(m.a)(Object(m.a)({},e),{},{ticks:e.ticks+t.payload})}}}),v=j.reducer,O=j.actions,A=i(7),x=i(6),y=i(18),k=function(){function e(t){var i=t.x,n=t.y;Object(A.a)(this,e),this.x=void 0,this.y=void 0,this.y=n,this.x=i}return Object(x.a)(e,[{key:"length",get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}}]),Object(x.a)(e,[{key:"add",value:function(t){return new e({x:this.x+t.x,y:this.y+t.y})}},{key:"scale",value:function(t){return new e({x:t*this.x,y:t*this.y})}},{key:"normalize",value:function(){return this.scale(1/this.length)}},{key:"subtract",value:function(t){return new e({x:this.x-t.x,y:this.y-t.y})}},{key:"toJSON",value:function(){return{x:this.x,y:this.y}}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}}]),e}(),w=Object(p.b)({name:"sleighs",initialState:[{id:"1",maxSpeed:5,position:{x:400,y:300},commands:[]}],reducers:{moveSleigh:function(e,t){return e.map((function(e){return e.id===t.payload.sleighId?Object(m.a)(Object(m.a)({},e),{},{commands:[].concat(Object(y.a)(e.commands),[{name:"move",payload:t.payload.targetPosition}])}):e}))}},extraReducers:function(e){e.addCase(O.waitTicks,(function(e,t){return e.map((function(e){if(0===e.commands.length)return e;var i=e.commands[0],n=new k(e.position),s=new k(i.payload),o=s.subtract(n),r=o.normalize(),a=e.maxSpeed*t.payload,c=o.length<=a?s:n.add(r.scale(a));return Object(m.a)(Object(m.a)({},e),{},{position:c.toJSON()})}))}))}}),S=w.actions,C=w.reducer,E=function(){function e(t,i){Object(A.a)(this,e),this.dispatch=i,this.commands=void 0,this.id=void 0,this.maxSpeed=void 0,this.position=void 0,this.commands=t.commands,this.id=t.id,this.maxSpeed=t.maxSpeed,this.position=t.position}return Object(x.a)(e,[{key:"moveTo",value:function(e){this.dispatch(S.moveSleigh({sleighId:this.id,targetPosition:e}))}}]),e}(),L=function(){function e(t){Object(A.a)(this,e),this.store=t}return Object(x.a)(e,[{key:"houses",get:function(){return this.store.getState().houses}},{key:"sleighs",get:function(){var e=this;return this.store.getState().sleighs.map((function(t){return new E(t,e.store.dispatch.bind(e.store))}))}}]),e}();var Q=i(11);function B(){var e=Object(u.d)((function(e){return e.world.fps})),t=Object(u.d)((function(e){return e.world.ticksPerFrame})),i=Object(u.d)((function(e){return e})),o=Object(s.useContext)(u.b).store,r=Object(u.d)((function(e){return e.currentLevel.isCompleted})),a=Object(s.useState)("const sleigh = game.sleighs[0];\nconst house = game.houses[0];\nconst positionOfHouse = house.position;\nconst someRandomPosition = { x: 300, y: 300 };\nsleigh.moveTo(someRandomPosition);"),h=Object(c.a)(a,2),d=h[0],l=h[1];var b=Object(u.c)();return Object(s.useEffect)((function(){var i=setInterval((function(){return b(O.waitTicks(t))}),1e3/e);return function(){return clearInterval(i)}}),[b,e,t]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:"Santa needs to bring his presents to the children. Write code below to help him."}),r&&Object(n.jsx)("div",{children:Q.c}),Object(n.jsx)(f,{state:i}),Object(n.jsxs)("form",{children:[Object(n.jsx)("label",{htmlFor:"code",children:Q.a}),Object(n.jsx)("textarea",{id:"code",style:{display:"block",height:"7rem",width:i.world.size.width,margin:"1rem"},value:d,onChange:function(e){return l(e.target.value)}}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault();var t=new L(o);!function(e,t){new Function("game",e)(t)}(d,t)},children:Q.b})]})]})}var F=i(3),U=Object(p.b)({name:"currentLevel",initialState:{isCompleted:!1},reducers:{}}).reducer,Y=Object(p.b)({name:"houses",initialState:[{id:"1",position:{x:100,y:100}}],reducers:{}}),I=Y.reducer;Y.actions;function P(e){return new k(e.houses[0].position).equals(e.sleighs[0].position)}function D(){return Object(p.a)({reducer:function(e,t){return function(e,t){return Object(m.a)(Object(m.a)({},e),{},{currentLevel:Object(m.a)(Object(m.a)({},e.currentLevel),{},{isCompleted:P(e)})})}(Object(F.c)({currentLevel:U,houses:I,sleighs:C,world:v})(e,t))}})}var q=function(){return Object(n.jsx)(u.a,{store:D(),children:Object(n.jsx)(B,{})})},z=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,34)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),n(e),s(e),o(e),r(e)}))};a.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(q,{})}),document.getElementById("root")),z()}},[[33,1,2]]]);
//# sourceMappingURL=main.5a0c655e.chunk.js.map