{"version":3,"sources":["components/Sprite/Sprite.tsx","sleighs/SleighSprite/sleigh.png","sleighs/SleighSprite/SleighSprite.tsx","houses/HouseSprite/house.png","houses/HouseSprite/HouseSprite.tsx","components/Display/Display.tsx","world/slice.ts","utils/Vector2D/Vector2D.ts","sleighs/slice.ts","Game/MovableSleigh.ts","Game/Game.ts","App.tsx","world/useFPS.ts","world/useTicksPerFrame.ts","executeCode/executeCode.ts","currentLevel/slice.ts","houses/slice.ts","store.ts","ConnectedApp.tsx","reportWebVitals.ts","index.tsx"],"names":["Sprite","position","x","y","state","spriteSheet","size","width","height","xOffset","yOffset","states","findIndex","el","style","left","top","backgroundImage","source","backgroundPositionX","backgroundPositionY","sleighSpriteSheetMetaData","frames","SleighSprite","sleigh","houseSpriteSheetMetaData","HouseSprite","Display","border","margin","world","houses","map","house","id","sleighs","createSlice","name","initialState","fps","ticks","ticksPerFrame","reducers","updateWorldState","action","payload","waitTicks","reducer","actions","Vector2D","this","Math","sqrt","vector2D","factor","scale","length","maxSpeed","commands","moveSleigh","sleighId","targetPosition","extraReducers","builder","addCase","worldActions","currentCommand","currentPosition","movementNeeded","subtract","direction","normalize","movementDistance","nextPosition","add","toJSON","MovableSleigh","dispatch","Game","store","getState","bind","App","useSelector","useContext","ReactReduxContext","hasWon","currentLevel","isCompleted","useState","code","setCode","useDispatch","useEffect","timer","setInterval","clearInterval","successMessage","htmlFor","codeInputLabel","display","value","onChange","event","target","onClick","preventDefault","game","Function","execute","executeCode","runCodeButtonLabel","equals","createStore","configureStore","checkWinCondition","combineReducers","ConnectedApp","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5a0c655e.chunk.js","sourcesContent":["import { Position } from \"../../models/Position\";\nimport React from \"react\";\nimport { SpriteSheet } from \"./SpriteSheet\";\n\ninterface Props<State> {\n  position: Position;\n  state: State;\n  spriteSheet: SpriteSheet<State>;\n}\n\nexport function Sprite<State>({\n  position: { x, y },\n  state,\n  spriteSheet,\n}: Props<State>) {\n  const frame = 0;\n  const { width, height } = spriteSheet.size;\n  const row = spriteSheet.states.findIndex((el) => el === state);\n  const xOffset = -1 * frame * width;\n  const yOffset = -1 * row * height;\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        width,\n        height,\n        left: x - width / 2,\n        top: y - height / 2,\n        backgroundImage: `url(${spriteSheet.source})`,\n        backgroundPositionX: xOffset,\n        backgroundPositionY: yOffset,\n      }}\n    />\n  );\n}\n","export default __webpack_public_path__ + \"static/media/sleigh.5439a825.png\";","import { Sprite } from \"../../components/Sprite/Sprite\";\nimport sleighSpriteSheet from \"./sleigh.png\";\nimport { Pixel } from \"../../models/Pixel\";\nimport React from \"react\";\nimport { Sleigh } from \"../Sleigh\";\n\nconst sleighSpriteSheetMetaData = {\n  source: sleighSpriteSheet,\n  size: {\n    width: 250 as Pixel,\n    height: 125 as Pixel,\n  },\n  frames: 6,\n  states: [\"idle\", \"moving\", \"crashing\", \"burning\"] as const,\n};\n\nexport interface Props {\n  sleigh: Sleigh;\n  state: typeof sleighSpriteSheetMetaData[\"states\"][number];\n}\n\nexport function SleighSprite({ sleigh: { position }, state }: Props) {\n  return (\n    <Sprite\n      position={position}\n      spriteSheet={sleighSpriteSheetMetaData}\n      state={state}\n    />\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAAP6SURBVHhe7ZLbdsUgCET7/z/dohBrEi+ogJpkP5wqEmaY1Z/fSfykoLcbhSdLZoZFJx4r5DXHQcfmbwwLdu5ee3pepvKD235hNfCWsGDP8VVFhoygri2+ofhAPhZh0UmUKZHp6mnvYxyZopLZJmZ5qciYxYRsHxadrLBRfEhYgIHoF1YDX1gNyAtMSQrYKSzwGqCSLQa6AgITA7qg7WRotLa5PvQs9c9dMKaAkrdnhgVo2OucuHhSCJiU9dk8S9yBNoJu2zbfK6aAlG03xQXGGyelaoyU7f+Y3MmD1zuFp/URMZ9Ix5VSRTrtiYh/N6Iaze5JIbDF4CLpsIBQHBRYDRfYeaN7JYdryrXyp2wHrobEFTzneGlYOcorZ8MKxcLHz8NFdUCliEQi99bL9WHgvki44tOFU0bh906uvjUulWivcMUDgk/I+XJ7jik8iYDqAN0PqOqhUgrqiHro7qHSQa5Ip4i4E89EKOHhTuGpjB9fgVpvzVT1UCkFdUQ9dPdQ6YCqB8liDDakO3J1oPAVgK936HlJ+Paaw0KSDYuHkqMhrBiqnauXKxKKvv103osm26dW3BmhUmYc9gSouiFN5tNB0InNpnm12n5pWGC4Z036G9G3ed9X9viUOq2+K6xBk2JhASvnBd7G7UmGBaCnAFVnI+IkvY/gkk7AQ/dJjBvACekp4utNzEtE+vlhgaiIbhhiFBbgnRtFJqgVz7ELC9GbjLiQRCXiadZhAXrDNSZPDgvQ3kqQ+WEBshIGSQEJDYOkEEEhDc/3mTPDAqS0xD0nB04OCxiXs0kKmB8WMKj4rrAAEG3VxU8AuouSHLtKWAhT2iWkbDI5f62wgLK6C0nfXk4iU10vLxeSlauc0IphAT6ZE/SgT0Fr3bDCrzE7hQXSsbq9k4LiWmEldY3NbBAWKOZEjc0U5LL+LC1WtdAPQHdNCioleQNzPoEGFexHqCRNYfK0sPy+Q/OV7BXG5h/UknIhCQ3XMFmYaRqWC0l6LM4E6D5GeY5dWOIDL4zPr04oPQuup50UAioBKrVQ/coiLKk5fDoUOZ9UOsb3tE8KAd0maU4zo6NxW2/SfRIOE+EY4PtkzaITg9Dc9JUqVSd8q6y+hnHLZBTgWGLalgxrwaQQMFb2xnTenILXPRGK2LAsF5O5cwFe0zErOZSptAjgNhBf8bUMd08cxxy6Mj6Zf6jKg5foAd23JV6hYx3uBw9LCvjCKvGFxeXuXzEsYOu8vrC4iCQFvDSsPr6wGnhFWICI+VeENeE/C1gwL7BUhVqHUQ+rYBefAlQ9oGoN6jahZ3k61YiXwfMFfApQ9YCqK9HjqbpMtWFT+lfCRJJQx+N47GLy/P7+AQEnBQawPmZzAAAAAElFTkSuQmCC\"","import { Sprite } from \"../../components/Sprite/Sprite\";\nimport houseSpriteSheet from \"./house.png\";\nimport { Pixel } from \"../../models/Pixel\";\nimport React from \"react\";\nimport { Position } from \"../../models/Position\";\n\nconst houseSpriteSheetMetaData = {\n  source: houseSpriteSheet,\n  size: {\n    width: 100 as Pixel,\n    height: 100 as Pixel,\n  },\n  frames: 1,\n  states: [\"idle\"] as const,\n};\n\nexport interface Props {\n  position: Position;\n  state: typeof houseSpriteSheetMetaData[\"states\"][number];\n}\n\nexport function HouseSprite({ position, state }: Props) {\n  return (\n    <Sprite\n      position={position}\n      spriteSheet={houseSpriteSheetMetaData}\n      state={state}\n    />\n  );\n}\n","import { State } from \"./State\";\nimport React from \"react\";\nimport { SleighSprite } from \"../../sleighs/SleighSprite/SleighSprite\";\nimport { HouseSprite } from \"../../houses/HouseSprite/HouseSprite\";\n\ninterface Props {\n  state: State;\n}\n\nexport function Display({ state }: Props) {\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        border: \"solid 1px black\",\n        margin: \"1rem\",\n        width: state.world.size.width,\n        height: state.world.size.height,\n      }}\n    >\n      {state.houses.map((house) => (\n        <HouseSprite key={house.id} position={house.position} state=\"idle\" />\n      ))}\n      {state.sleighs.map((sleigh) => (\n        <SleighSprite key={sleigh.id} sleigh={sleigh} state=\"idle\" />\n      ))}\n    </div>\n  );\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Pixel } from \"../models/Pixel\";\n\nconst initialState = {\n  fps: 50,\n  size: {\n    width: 800 as Pixel,\n    height: 600 as Pixel,\n  },\n  ticks: 0,\n  ticksPerFrame: 1,\n};\nexport const { reducer, actions } = createSlice({\n  name: \"world\",\n  initialState,\n  reducers: {\n    updateWorldState: (\n      state,\n      action: PayloadAction<Partial<typeof initialState>>\n    ) => ({ ...state, ...action.payload }),\n    waitTicks: (state, action: PayloadAction<number>) => ({\n      ...state,\n      ticks: state.ticks + action.payload,\n    }),\n  },\n});\n","import { Pixel } from \"../../models/Pixel\";\n\nexport class Vector2D {\n  get length(): Pixel {\n    return Math.sqrt(this.x ** 2 + this.y ** 2) as Pixel;\n  }\n\n  readonly x: Pixel;\n  readonly y: Pixel;\n\n  constructor({ x, y }: { x: number; y: number }) {\n    this.y = y as Pixel;\n    this.x = x as Pixel;\n  }\n\n  add(vector2D: Vector2D): Vector2D {\n    return new Vector2D({ x: this.x + vector2D.x, y: this.y + vector2D.y });\n  }\n\n  scale(factor: number): Vector2D {\n    return new Vector2D({ x: factor * this.x, y: factor * this.y });\n  }\n\n  normalize() {\n    return this.scale(1 / this.length);\n  }\n\n  subtract(vector2D: Vector2D): Vector2D {\n    return new Vector2D({ x: this.x - vector2D.x, y: this.y - vector2D.y });\n  }\n\n  toJSON(): { x: Pixel; y: Pixel } {\n    return {\n      x: this.x,\n      y: this.y,\n    };\n  }\n\n  equals(vector2D: { x: Pixel; y: Pixel }): boolean {\n    return this.x === vector2D.x && this.y === vector2D.y;\n  }\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { PixelPerTick } from \"../models/PixelPerTick\";\nimport { Pixel } from \"../models/Pixel\";\nimport { actions as worldActions } from \"../world/slice\";\nimport { Vector2D } from \"../utils/Vector2D/Vector2D\";\nimport { Command } from \"./Command\";\nimport { Position } from \"../models/Position\";\n\nexport const { actions, reducer } = createSlice({\n  name: \"sleighs\",\n  initialState: [\n    {\n      id: \"1\",\n      maxSpeed: 5 as PixelPerTick,\n      position: {\n        x: 400 as Pixel,\n        y: 300 as Pixel,\n      },\n      commands: [] as Command[],\n    },\n  ],\n  reducers: {\n    moveSleigh(\n      state,\n      action: PayloadAction<{ targetPosition: Position; sleighId: string }>\n    ) {\n      return state.map((sleigh) =>\n        sleigh.id === action.payload.sleighId\n          ? {\n              ...sleigh,\n              commands: [\n                ...sleigh.commands,\n                {\n                  name: \"move\",\n                  payload: action.payload.targetPosition,\n                },\n              ],\n            }\n          : sleigh\n      );\n    },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(worldActions.waitTicks, (state, action) =>\n      state.map((sleigh) => {\n        if (sleigh.commands.length === 0) return sleigh;\n        const currentCommand = sleigh.commands[0];\n        const currentPosition = new Vector2D(sleigh.position);\n        const targetPosition = new Vector2D(currentCommand.payload);\n        const movementNeeded = targetPosition.subtract(currentPosition);\n        const direction = movementNeeded.normalize();\n        const movementDistance = sleigh.maxSpeed * action.payload;\n        const nextPosition =\n          movementNeeded.length <= movementDistance\n            ? targetPosition\n            : currentPosition.add(direction.scale(movementDistance));\n        return {\n          ...sleigh,\n          position: nextPosition.toJSON(),\n        };\n      })\n    );\n  },\n});\n","import { Sleigh } from \"../sleighs/Sleigh\";\nimport { Position } from \"../models/Position\";\nimport { PixelPerTick } from \"../models/PixelPerTick\";\nimport { Command } from \"../sleighs/Command\";\nimport { AnyAction } from \"@reduxjs/toolkit\";\nimport { actions } from \"../sleighs/slice\";\n\nexport class MovableSleigh implements Sleigh {\n  public commands: Command[];\n  public id: string;\n  public maxSpeed: PixelPerTick;\n  public position: Position;\n\n  constructor(sleigh: Sleigh, private dispatch: (action: AnyAction) => void) {\n    this.commands = sleigh.commands;\n    this.id = sleigh.id;\n    this.maxSpeed = sleigh.maxSpeed;\n    this.position = sleigh.position;\n  }\n\n  moveTo(targetPosition: Position) {\n    this.dispatch(\n      actions.moveSleigh({\n        sleighId: this.id,\n        targetPosition,\n      })\n    );\n  }\n}\n","import { Action, Store } from \"@reduxjs/toolkit\";\nimport { State } from \"../components/Display/State\";\nimport { House } from \"../houses/House\";\nimport { MovableSleigh } from \"./MovableSleigh\";\n\nexport class Game {\n  get houses(): House[] {\n    return this.store.getState().houses;\n  }\n\n  get sleighs(): MovableSleigh[] {\n    return this.store\n      .getState()\n      .sleighs.map(\n        (sleigh) =>\n          new MovableSleigh(sleigh, this.store.dispatch.bind(this.store))\n      );\n  }\n\n  constructor(private store: Store<State, Action>) {}\n}\n","import { ReactReduxContext, useDispatch, useSelector } from \"react-redux\";\nimport { State } from \"./components/Display/State\";\nimport { Display } from \"./components/Display/Display\";\nimport React, { ChangeEvent, useContext, useEffect, useState } from \"react\";\nimport { actions as worldActions } from \"./world/slice\";\nimport { Game } from \"./Game/Game\";\nimport { executeCode } from \"./executeCode/executeCode\";\n\nimport {\n  codeInputLabel,\n  runCodeButtonLabel,\n  successMessage,\n} from \"./locale/en/main.json\";\nimport { useFPS } from \"./world/useFPS\";\nimport { useTicksPerFrame } from \"./world/useTicksPerFrame\";\n\nexport function App() {\n  const fps = useFPS();\n  const ticksPerFrame = useTicksPerFrame();\n  const state = useSelector((state: State) => state);\n  const { store } = useContext(ReactReduxContext);\n  const hasWon = useSelector((state: State) => state.currentLevel.isCompleted);\n  const [code, setCode] = useState(\n    `const sleigh = game.sleighs[0];\nconst house = game.houses[0];\nconst positionOfHouse = house.position;\nconst someRandomPosition = { x: 300, y: 300 };\nsleigh.moveTo(someRandomPosition);`\n  );\n  function runCode(event: ChangeEvent<unknown>) {\n    event.preventDefault();\n    const game = new Game(store);\n    executeCode(code, game);\n  }\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const timer = setInterval(\n      () => dispatch(worldActions.waitTicks(ticksPerFrame)),\n      1000 / fps\n    );\n    return () => clearInterval(timer);\n  }, [dispatch, fps, ticksPerFrame]);\n\n  return (\n    <>\n      <div>\n        Santa needs to bring his presents to the children. Write code below to\n        help him.\n      </div>\n      {hasWon && <div>{successMessage}</div>}\n      <Display state={state} />\n      <form>\n        <label htmlFor=\"code\">{codeInputLabel}</label>\n        <textarea\n          id=\"code\"\n          style={{\n            display: \"block\",\n            height: \"7rem\",\n            width: state.world.size.width,\n            margin: \"1rem\",\n          }}\n          value={code}\n          onChange={(event) => setCode(event.target.value)}\n        />\n        <button onClick={runCode}>{runCodeButtonLabel}</button>\n      </form>\n    </>\n  );\n}\n","import { State } from \"../components/Display/State\";\nimport { useSelector } from \"react-redux\";\n\nexport function useFPS() {\n  return useSelector((state: State) => state.world.fps);\n}\n","import { useSelector } from \"react-redux\";\nimport { State } from \"../components/Display/State\";\n\nexport function useTicksPerFrame() {\n  return useSelector((state: State) => state.world.ticksPerFrame);\n}\n","import { Game } from \"../Game/Game\";\n\nexport function executeCode(code: string, game: Game) {\n  // eslint-disable-next-line no-new-func\n  const execute = new Function(\"game\", code);\n  execute(game);\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const { reducer } = createSlice({\n  name: \"currentLevel\",\n  initialState: {\n    isCompleted: false,\n  },\n  reducers: {},\n});\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { Pixel } from \"../models/Pixel\";\n\nexport const { reducer, actions } = createSlice({\n  name: \"houses\",\n  initialState: [\n    {\n      id: \"1\",\n      position: {\n        x: 100 as Pixel,\n        y: 100 as Pixel,\n      },\n    },\n  ],\n  reducers: {},\n});\n","import { AnyAction, combineReducers, configureStore } from \"@reduxjs/toolkit\";\nimport { reducer as currentLevel } from \"./currentLevel/slice\";\nimport { reducer as houses } from \"./houses/slice\";\nimport { reducer as sleighs } from \"./sleighs/slice\";\nimport { reducer as world } from \"./world/slice\";\nimport { State } from \"./components/Display/State\";\nimport { Vector2D } from \"./utils/Vector2D/Vector2D\";\n\nfunction hasWon(state: State) {\n  return new Vector2D(state.houses[0].position).equals(\n    state.sleighs[0].position\n  );\n}\n\nfunction checkWinCondition(state: State, action: AnyAction): State {\n  return {\n    ...state,\n    currentLevel: {\n      ...state.currentLevel,\n      isCompleted: hasWon(state),\n    },\n  };\n}\n\nexport function createStore() {\n  return configureStore({\n    reducer: (state, action) => {\n      const intermediateState = combineReducers({\n        currentLevel,\n        houses,\n        sleighs,\n        world,\n      })(state, action);\n\n      return checkWinCondition(intermediateState, action);\n    },\n  });\n}\n","import React from \"react\";\nimport { App } from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"./store\";\n\nfunction ConnectedApp() {\n  return (\n    <Provider store={createStore()}>\n      <App />\n    </Provider>\n  );\n}\n\nexport default ConnectedApp;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport ConnectedApp from \"./ConnectedApp\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConnectedApp />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}